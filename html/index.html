<!doctype html>
<html>

<head>
  <meta charset="UTF-8" />

  <title>hello hypo phaser!</title>

  <link rel="stylesheet" type="text/css" href="css/game-style.css" />
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/phaser.min.js"></script>
  <script src="js/angebote.js"></script>
  <script src="js/Angebot.js"></script>
  <script src="js/dropzone.js"></script>

</head>

<body>

  <script type="text/javascript">
    window.onload = function() {
       
      window.game = new Phaser.Game(800, 800, Phaser.AUTO, '', {
        preload: preload,
        create: create,
        update: update
      });

      var angeboteSprites;
      var dropZoneGroup;

      function preload() {
        game.load.image('angebot_bg', 'img/angebot_bg.png');
        game.load.image('dropzone_bg', 'img/barrier_bg.png');
      }

      function create() {
        var generator = new hypoport.game.AngebotGenerator()

        game.physics.startSystem(Phaser.Physics.ARCADE);
        angeboteSprites = game.add.group();
        
        for (var i = 0; i < 5; i++) {
          var kondition = generator.createRandomAngebot();
          var angebot = AngebotSprite.create(40, 40 + i * 80, kondition);
          AngebotSprite.addPhysics(angebot);
          AngebotSprite.addFadeOut(angebot);
          angeboteSprites.add(angebot);
        }
        
        dropZoneGroup = game.add.group();
        var dropZone= DropZone.create(0,game.world.height-4*70-10);
        DropZone.addPhysics(dropZone);        
        dropZoneGroup.add(dropZone);
      }

      function update() {
        game.physics.arcade.collide(angeboteSprites, angeboteSprites);
        // game.physics.arcade.collide(angeboteSprites, dropZoneGroup);
        
        game.physics.arcade.overlap(angeboteSprites, dropZoneGroup, DropZone.onOverlap, null, this);

      }
    };
    
  </script>

</body>

</html>